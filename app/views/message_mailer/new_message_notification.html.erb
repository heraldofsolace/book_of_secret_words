<% dashboard_url = dashboard_url() rescue "#" %>

<div style="background-color:#020617;padding:32px 16px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;color:#e5e7eb;">
  <div style="max-width:480px;margin:0 auto;background:#020617;border-radius:24px;border:1px solid #1f2937;padding:28px 24px;">

    <!-- Logo -->
    <div style="text-align:center;margin-bottom:16px;">
      <div style="display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:16px;background:linear-gradient(135deg,#ef4444,#fb7185);color:#fff;font-weight:700;font-size:18px;">
        B
      </div>
      <div style="margin-top:8px;font-size:11px;letter-spacing:0.25em;text-transform:uppercase;color:#9ca3af;">
        book of
      </div>
      <div style="font-size:14px;font-weight:600;color:#f9fafb;">
        secret words
      </div>
    </div>

    <!-- Greeting -->
    <h1 style="margin:20px 0 12px 0;font-size:20px;font-weight:600;color:#f9fafb;">
      Youâ€™ve got a new secret message ðŸ‘€
    </h1>

    <p style="margin:0 0 12px 0;font-size:13px;line-height:1.6;color:#d1d5db;">
      Hi <span style="color:#fb7185;font-weight:600;"><%= @user.username.presence || @user.email %></span>,
      someone just sent you a new anonymous message on <strong>book of secret words</strong>.
    </p>

    <!-- Message preview -->
    <div style="margin:18px 0;padding:14px 12px;border-radius:14px;border:1px solid #1f2937;background-color:#020617;">
      <div style="font-size:11px;color:#9ca3af;margin-bottom:6px;">
        Message preview:
      </div>
      <div style="font-size:13px;line-height:1.6;color:#e5e7eb;white-space:pre-wrap;">
        <%= truncate(@message.body.to_s, length: 220) %>
      </div>
    </div>

    <!-- Button -->
    <div style="text-align:center;margin:24px 0;">
      <a href="<%= dashboard_url %>"
         style="display:inline-block;padding:10px 22px;border-radius:999px;background:linear-gradient(135deg,#ef4444,#fb7185);color:#ffffff;text-decoration:none;font-size:13px;font-weight:600;box-shadow:0 10px 25px rgba(248,113,113,0.35);">
        Open your inbox
      </a>
    </div>

    <!-- Footer -->
    <p style="margin:0 0 8px 0;font-size:11px;line-height:1.6;color:#9ca3af;">
      Tip: You can pin your favorite messages or make them public from your dashboard.
    </p>

    <p style="margin:16px 0 0 0;font-size:10px;line-height:1.6;color:#4b5563;text-align:center;">
      Youâ€™re receiving this email because you have a book of secret words account.
    </p>
  </div>
</div>
